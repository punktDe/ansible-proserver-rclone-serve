{% macro rclone(rclone_serve_config, rclone_serve_defaults) -%}
{{ rclone_serve_config.rclone|default(rclone_serve_defaults.rclone, true) }} serve {{ rclone_serve_config.type }}{% for option, value in (rclone_serve_config.opts|default({})).items()|selectattr('1', 'ne', none) %} --{{ option|quote }}={{ value|quote }}{% endfor %}{% for argument in ((rclone_serve_config.args|default({})).items()|sort(attribute='0'))|map(attribute='1')|select('ne', none) %} {{ argument|quote }}{% endfor %}
{%- endmacro %}
